<html>
<head>
  <script type="application/javascript">
    var SCROLL_DELAY = 80;

    var container;
    var commandline;
    var lastScrollTime = new Date().getTime();
      var load = function() {
        document.addEventListener('mousewheel', mousewheel, false);
        document.addEventListener('keypress', command, false);
        document.addEventListener('keydown', backspace, false);
        container = document.getElementById('container');
        commandline = document.getElementById('commandline');
      };
      var scrollDown = function() {
        var now = new Date();
        var description = 'The time is now ' + now.toTimeString().split(' ')[0] + ' on ' + now.toDateString() + '.';
        var content = document.createElement('p');
        content.textContent = description;
        var newline = document.createElement('br');
        container.appendChild(content);
        container.appendChild(newline);
        requestAnimationFrame(animate);
      };
      var scrollUp = function() {
        if (container.children.length > 0) {
            container.removeChild(container.childNodes[container.childNodes.length - 1]);
            container.removeChild(container.childNodes[container.childNodes.length - 1]);
          }
      };
      var animate = function() {
        var element = container.childNodes[container.childNodes.length - 2];
        var rectangle = element.getBoundingClientRect();
        console.log('left ' + rectangle.left + ' bottom ' + rectangle.bottom);
        window.scrollTo(window.scrollX + rectangle.left, window.scrollY + rectangle.bottom);
      };
      var mousewheel = function(e) {
        var time = new Date().getTime();
        if (time - lastScrollTime > SCROLL_DELAY) {
          if (e.wheelDelta < 0) {
            scrollDown();
          } else if (e.wheelDelta > 0) {
            scrollUp();
          }
          lastScrollTime = time;
        }
        e.preventDefault();
      };
      var backspace = function(e) {
        if (e.keyCode == 37) {
          commandline.textContent = commandline.textContent.slice(0, -1);
        } else if (e.keyCode == 38) {
          scrollUp();
        } else if (e.keyCode == 40) {
          scrollDown();
        }
      };
      var command = function(e) {
        if (e.keyCode == 13) {
          var content = document.createElement('p');
          content.textContent = 'You did "' + commandline.textContent + '."';
          commandline.textContent = "";
          var newline = document.createElement('br');
          container.appendChild(content);
          container.appendChild(newline);
        } else {
          commandline.textContent = commandline.textContent + String.fromCharCode(e.keyCode);
        }
      };
      window.addEventListener('load', load, false);
  </script>
  <style type="text/css">
      body {
        background: black;
        color: white;
        font-family: "Courier New";
        font-weight: bold;
      }
      p {
        padding: 0px 0px 0px 0px;
        margin: 0px 0px 0px 0px;
      }
  </style>
</head>
<body>
  <div id="container">
  Text Tennis<br /></div>
  <br />
  <div id="commandline"></div>
</body>
</html>
